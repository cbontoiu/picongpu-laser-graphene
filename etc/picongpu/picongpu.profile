export PIC_PROFILE=$(cd $(dirname $BASH_SOURCE) && pwd)"/"$(basename $BASH_SOURCE)

. /home/quasar/src/spack/share/spack/setup-env.sh

# optional: compiler, if not regular system compiler
spack load gcc@9.3.0 >/dev/null 2>&1 || echo "using default compiler"

# required: PIConGPU and its dependencies
spack load picongpu@0.6.0%gcc@9.3.0~adios+hdf5~isaac+openpmd+png backend=cuda cudacxx=nvcc arch=linux-ubuntu20.04-skylake ^adios2@2.7.1%gcc@9.3.0+blosc+bzip2~dataman~dataspaces~endian_reverse+fortran~hdf5~ipo+mpi+pic+png~python+shared+ssc+sst+sz+zfp build_type=Release patches=8d301e8232baf4049b547f22bd73774309662017a62dac36360d2965907062bf arch=linux-ubuntu20.04-skylake ^berkeley-db@18.1.40%gcc@9.3.0+cxx~docs+stl patches=b231fcc4d5cff05e5c3a4814f6a5af0e9a966428dc2176540d2c05aff41de522 arch=linux-ubuntu20.04-skylake ^boost@1.70.0%gcc@9.3.0+atomic+chrono~clanglibcpp~container~context~coroutine+date_time~debug+exception~fiber+filesystem+graph~icu+iostreams+locale+log+math~mpi+multithreaded~numpy~pic+program_options~python+random+regex+serialization+shared+signals~singlethreaded+system~taggedlayout+test+thread+timer~versionedlayout+wave cxxstd=14 patches=5da7ad24de07adc1e99b2bab8b5aeefa0059d0f0ace932788c7746f9117d9917 visibility=hidden arch=linux-ubuntu20.04-skylake ^bzip2@1.0.8%gcc@9.3.0~debug~pic+shared arch=linux-ubuntu20.04-skylake ^c-blosc@1.21.0%gcc@9.3.0+avx2~ipo build_type=RelWithDebInfo arch=linux-ubuntu20.04-skylake ^cmake@3.22.2%gcc@9.3.0~doc+ncurses+openssl+ownlibs~qt build_type=Release arch=linux-ubuntu20.04-skylake ^cuda@11.6%gcc@9.3.0~allow-unsupported-compilers~dev arch=linux-ubuntu20.04-skylake ^diffutils@3.8%gcc@9.3.0 arch=linux-ubuntu20.04-skylake ^freetype@2.11.0%gcc@9.3.0 arch=linux-ubuntu20.04-skylake ^gdbm@1.19%gcc@9.3.0 arch=linux-ubuntu20.04-skylake ^hdf5@1.12.1%gcc@9.3.0~cxx~fortran~hl~ipo~java+mpi+shared~szip~threadsafe+tools api=default build_type=RelWithDebInfo arch=linux-ubuntu20.04-skylake ^libfabric@1.14.0%gcc@9.3.0~debug~kdreg fabrics=sockets,tcp,udp arch=linux-ubuntu20.04-skylake ^libffi@3.3%gcc@9.3.0 patches=26f26c6f29a7ce9bf370ad3ab2610f99365b4bdd7b82e7c31df41a3370d685c0 arch=linux-ubuntu20.04-skylake ^libiconv@1.16%gcc@9.3.0 libs=shared,static arch=linux-ubuntu20.04-skylake ^libpng@1.6.37%gcc@9.3.0 arch=linux-ubuntu20.04-skylake ^lz4@1.9.3%gcc@9.3.0 libs=shared,static arch=linux-ubuntu20.04-skylake ^mpark-variant@1.4.0%gcc@9.3.0~ipo build_type=RelWithDebInfo patches=21a4f8de3525204ee6db2e53758a3e3fd9c13817df29d2926d24376858a369e7,4e173fe8c853eb92956a40371688b4a19498189fe65b7ceac30f6b9d6663a985,b3501f726fd40129b4aaa11453a5891c8953a34af8ac84f5ab10a22afa5e7b9b arch=linux-ubuntu20.04-skylake ^ncurses@6.2%gcc@9.3.0~symlinks+termlib abi=none arch=linux-ubuntu20.04-skylake ^nlohmann-json@3.10.5%gcc@9.3.0~ipo~multiple_headers build_type=RelWithDebInfo arch=linux-ubuntu20.04-skylake ^openmpi@5.0.0%gcc@9.3.0~atomics~cuda~cxx~cxx_exceptions+gpfs~internal-hwloc~java~legacylaunchers~lustre~memchecker~pmi~pmix+romio~singularity~sqlite3+static~thread_multiple+vt+wrapper-rpath fabrics=none schedulers=none arch=linux-ubuntu20.04-skylake ^openpmd-api@0.14.4%gcc@9.3.0~adios1+adios2+hdf5~ipo+mpi~python+shared build_type=RelWithDebInfo arch=linux-ubuntu20.04-skylake ^openssl@1.1.1m%gcc@9.3.0~docs certs=system arch=linux-ubuntu20.04-skylake ^perl@5.34.0%gcc@9.3.0+cpanm+shared+threads arch=linux-ubuntu20.04-skylake ^pkgconf@1.8.0%gcc@9.3.0 arch=linux-ubuntu20.04-skylake ^pngwriter@0.7.0%gcc@9.3.0~ipo build_type=RelWithDebInfo arch=linux-ubuntu20.04-skylake ^popt@1.16%gcc@9.3.0 arch=linux-ubuntu20.04-skylake ^readline@8.1%gcc@9.3.0 arch=linux-ubuntu20.04-skylake ^rsync@3.2.3%gcc@9.3.0 arch=linux-ubuntu20.04-skylake ^snappy@1.1.8%gcc@9.3.0~ipo+pic+shared build_type=RelWithDebInfo patches=c9cfecb1f7a623418590cf4e00ae7d308d1c3faeb15046c2e5090e38221da7cd arch=linux-ubuntu20.04-skylake ^sz@2.1.12%gcc@9.3.0~fortran~hdf5~ipo~netcdf~pastri~python~random_access+shared~stats~time_compression build_type=RelWithDebInfo arch=linux-ubuntu20.04-skylake ^xxhash@0.8.0%gcc@9.3.0 arch=linux-ubuntu20.04-skylake ^zfp@0.5.5%gcc@9.3.0~aligned~c~cuda~fasthash~fortran~ipo~openmp~profile~python+shared~strided~twoway bsws=64 build_type=RelWithDebInfo arch=linux-ubuntu20.04-skylake ^zlib@1.2.11%gcc@9.3.0+optimize+pic+shared arch=linux-ubuntu20.04-skylake ^zstd@1.5.0%gcc@9.3.0~programs arch=linux-ubuntu20.04-skylake

# activate bash completion if available
PIC_COMP_FILE=$PICSRC/bin/picongpu-completion.bash
if [ -f $PIC_COMP_FILE ] ; then
    source $PIC_COMP_FILE
fi
